{% extends "base.html" %}
{% block content %}
<head>
    <meta charset="UTF-8">
    <title>{{ title }}</title>
</head>
<body>
    <h1>Задание {{ title }}</h1>
    <h2>Решите уравнение {{ task }} (Балл за задание - {{ points }}).</h2>

    {% if not show_solution %}
        {% if title == 'Квадратное уравнение' %}
            <h2>Инструкция по вводу ответа.</h2>
            <h2>Если 2 корня, то запишите их через пробел в порядке возрастания.</h2>
            <h2>Если 1 корень, то запишите его в ответ.</h2>
            <h2>Если решений нет, запишите в ответе строку: "Корней нет".</h2>

        {% elif title == 'Биквадратное уравнение' %}
            <h2>Инструкция по вводу ответа.</h2>
            <h2>Если 2 или 4 корня, то запишите их через пробел в порядке возрастания.</h2>
            <h2>Если решений нет, запишите в ответе строку: "Корней нет".</h2>

        {% elif title == 'Линейное уравнение' %}
            <h2>Инструкция по вводу ответа.</h2>
            <h2>В ответ запишите корень уравнения.</h2>

        {% elif title == 'Иррациональное уравнение' %}
            <h2>Инструкция по вводу ответа.</h2>
            <h2>В ответ запишите корень уравнения, не забудьте учесть ограничения.</h2>

        {% elif title == 'Уравнение с модулем' %}
            <h2>Инструкция по вводу ответа.</h2>
            <h2>В ответ запишите корень уравнения, не забудьте учесть ограничения.</h2>
            <h2>Вам может понадобиться знак "∞" - бесконечность. (-∞;1.5] - пример ввода промежутка.</h2>

        {% elif title == 'Линейное неравенство. Метод интервалов' %}
            <h2>Инструкция по вводу ответа.</h2>
            <h2>Для ввода ответа используйте данные обозначения:</h2>
            <h2>1.∪ - объединение множеств;</h2>
            <h2>2.∞ - бесконечность.</h2>
            <h2>В ответ запишите решение неравенства интервалы должны быть расположены в порядке возрастания</h2>
            <h2>(пример: (-∞;-0.4) ∪ (0.33;0.57) ∪ (9;+∞)).</h2>
            <h2>Если в ответ входят отдельные от интервалов числа напишите их в конце в фигурных скобках</h2>
            <h2>(пример: [-2;5] ∪ [6;+∞) ∪ {5.5})</h2>
            <h2>Если решением является пустое множество, запишите в ответ строку: "Корней нет".</h2>

        {% elif 'Пример' in title %}
            <h2>Инструкция по вводу ответа.</h2>
            <h2>В ответ запишите только ответ на пример (целое или дробное число).</h2>
        {% endif %}

        <h2>Если получается бесконечная дробь округлите до сотых (если есть незначащие нули в конце, уберите их).
            Разделитель для дробных чисел - точка.</h2>

        <h2>Вы также можете прикрепить файл с решением (необязательно).</h2>
    {% endif %}

    <nav>
        <ul>
            {% if not show_solution and 'Пример' not in title %}
            <a href="{{ url_for('show_solution', group_id=group.id, task_type=task_key) }}"
               class="btn btn-outline-info btn-sm">
                Показать решение
            </a>
            {% endif %}
        </ul>
    </nav>

    <form action="" method="post" enctype="multipart/form-data">
        {% if not show_solution %}
            {{ form.answer.label }}<br>
            {{ form.answer(class="form-control") }}<br>
            {% for error in form.answer.errors %}
            <p class="alert alert-danger" role="alert">
                {{ error }}
            </p>
            {% endfor %}

            <!-- Поле для прикрепления файла -->
            <div class="form-group mt-3">
                {{ form.file.label }}<br>
                {{ form.file(class="form-control-file") }}
                {% if form.file.errors %}
                    {% for error in form.file.errors %}
                        <p class="alert alert-danger" role="alert">
                            {{ error }}
                        </p>
                    {% endfor %}
                {% endif %}
                <small class="form-text text-muted">
                    Можно прикрепить файл с решением (PDF, PNG, JPG, DOC, TXT, ZIP, RAR). Максимальный размер: 16MB.
                </small>
            </div>

            <center>
                <p>{{ form.submit(type="submit", class="btn btn-primary mt-3") }}</p>
            </center>
        {% endif %}

        {% if message %}
            <h2>{{ message }}</h2>
        {% endif %}

        {% if show_solution %}
            <h2>Решение: {{ title.split('(')[0].strip() if '(' in title else title }}</h2>
            <h2>{% if 'уравнение' in title %}Наше уравнение{% else %}Наш пример{% endif %}: {{ task }}</h2>

            {% for item in solution_log %}
            <h2>{{ item }}</h2>
            {% endfor %}
        {% endif %}
    </form>

    <br/>
    <br/>
    <a class="btn btn-primary" href="/student_groups/{{ group.id }}/task">Назад</a>
</body>
{% endblock %}